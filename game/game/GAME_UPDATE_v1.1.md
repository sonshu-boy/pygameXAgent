# 遊戲更新 v1.1 - 蓄力攻擊系統

## 更新日期

2025 年 7 月 31 日

## 更新概述

本次更新重點加強了戰鬥系統的深度和策略性，新增了蓄力攻擊機制，並重新平衡了敵人的血量和傷害系統。

## 主要更新內容

### 1. 🥊 蓄力攻擊系統

- **新增蓄力機制**：玩家現在可以按住攻擊鍵進行蓄力
- **蓄力時間**：需要 3 秒完成蓄力
- **視覺效果**：
  - 蓄力過程中拳頭逐漸變大
  - 顏色從黃色漸變到紅色
  - 完成蓄力後拳頭閃爍白光
- **傷害倍數**：蓄力攻擊造成 2 倍傷害
- **特殊效果**：具有擊退和眩暈效果

### 2. ⚔️ 戰鬥平衡調整

- **普通攻擊**：
  - 移除眩暈效果
  - 保持 1 點基礎傷害
  - 無擊退效果
- **蓄力攻擊**：
  - 2 點傷害
  - 造成眩暈效果（持續 0.1 秒）
  - 具有擊退效果

### 3. 🤖 敵人血量重新平衡

#### 小型老鼠機器人（Mini Boss）

- **血量調整**：從 2 點增加到 3 點
- **擊敗方式**：
  - 普通攻擊：需要 3 次
  - 蓄力攻擊：需要 1 次（優勢明顯）

#### 大型老鼠機器人（Boss）

- **普通攻擊免疫**：只會受到蓄力攻擊傷害
- **增強防禦**：大幅提升戰鬥難度
- **特殊攻擊觸發**：血量低於 50%時啟動

### 4. 🔥 Boss 特殊攻擊系統

- **觸發條件**：血量下降至 50%以下
- **攻擊效果**：範圍傷害攻擊
- **防禦機制**：只能通過防禦抵擋
- **攻擊範圍**：200 像素半徑
- **冷卻時間**：5 秒

### 5. 🎮 操作說明更新

- **蓄力攻擊**：按住左鍵/右鍵進行蓄力，釋放發動攻擊
- **策略提示**：面對 Boss 時必須使用蓄力攻擊
- **防禦重要性**：Boss 特殊攻擊只能靠防禦抵擋

## 技術改進

### 代碼架構優化

- **Fist 類重構**：
  - 新增 `charging` 狀態
  - 新增 `start_charging()` 和 `release_attack()` 方法
  - 改進 `update()` 和 `draw()` 方法支援蓄力效果

### 常數配置

```python
# 新增常數
CHARGE_TIME = 3000  # 蓄力時間 3 秒
CHARGE_DAMAGE_MULTIPLIER = 2  # 蓄力攻擊傷害倍數
STUN_DURATION = 100  # 眩暈持續時間（毫秒）
SMALL_ROBOT_HEALTH = 3  # 小型機器人血量
BOSS_SPECIAL_ATTACK_THRESHOLD = 0.5  # Boss特殊攻擊觸發閾值
```

### 敵人 AI 增強

- **GiantRobot**：新增血量檢查邏輯，低血量時觸發特殊攻擊
- **SmallRobot**：血量調整，更具挑戰性
- **Enemy 基類**：眩暈時間使用新常數

## 遊戲體驗改進

### 策略深度

- **普通攻擊 vs 蓄力攻擊**：玩家需要在速度和威力間做選擇
- **風險與回報**：蓄力攻擊需要時機把握，但威力巨大
- **Boss 戰術**：必須掌握蓄力攻擊才能對付 Boss

### 視覺回饋

- **蓄力過程可視化**：拳頭大小和顏色變化
- **完成蓄力指示**：閃爍效果明確告知玩家
- **眩暈效果**：敵人變黃色顯示眩暈狀態

## 測試驗證

- ✅ 蓄力攻擊機制正常工作
- ✅ 小型機器人血量平衡
- ✅ Boss 免疫普通攻擊
- ✅ 眩暈系統功能正常
- ✅ 特殊攻擊觸發條件正確

## 向後兼容性

- 保持原有操作方式（點擊立即攻擊）
- 所有現有功能正常運作
- 遊戲存檔和進度不受影響

## 下一步計劃

- 添加更多視覺特效
- 實現連擊系統
- 新增更多敵人類型
- 擴展特殊攻擊種類

---

**開發團隊注記**：本次更新大幅提升了遊戲的策略深度，玩家現在需要更仔細地選擇攻擊時機，特別是在面對 Boss 時。蓄力攻擊的引入讓戰鬥更加有趣和具有挑戰性。
