# 老鼠格鬥遊戲

一個使用 Pygame 開發的 2D 橫向格鬥遊戲，玩家操作一隻老鼠角色完成三個不同的關卡。

## 遊戲特色

- **獨特的拳頭攻擊系統**：左右拳可以分別控制，支持蓄力攻擊
- **多樣的戰鬥機制**：包含防禦、閃避、滑行等動作
- **三個不同關卡**：從訓練場到最終 BOSS 戰
- **流暢的戰鬥體驗**：擊退、眩暈、無敵時間等細緻的戰鬥反饋

## 安裝需求

- Python 3.7+
- Pygame 2.5.2
- Windows 系統（用於中文字體支援）

## 字體支援

遊戲支援繁體中文顯示，會自動檢測並使用以下字體：

- **微軟正黑體** (msjh.ttc) - 優先選擇
- **微軟雅黑** (msyh.ttc)
- **細明體** (mingliu.ttc)
- **宋體** (simsun.ttc)

如果系統中沒有找到中文字體，遊戲會回退到系統預設字體。

## 安裝方法

1. 確保已安裝 Python
2. 安裝依賴套件：

```bash
pip install -r requirements.txt
```

## 運行遊戲

```bash
python run_game.py
```

或

```bash
python main.py
```

## 遊戲操作

### 基本移動

- **W** 或 **上方向鍵**：跳躍
- **A** 或 **左方向鍵**：向左移動
- **D** 或 **右方向鍵**：向右移動

### 攻擊系統

- **左鍵**：左拳攻擊
- **右鍵**：右拳攻擊
- **長按攻擊鍵**：蓄力攻擊（增加傷害和距離，造成擊退和眩暈）
- 拳頭會朝向滑鼠指標方向攻擊
- 拳頭有最大攻擊距離限制
- 擊中目標後拳頭會立即返回

### 防禦與閃避

- **空白鍵**：防禦（短暫無敵，有冷卻時間）
- **Shift**（靜止時）：蹲下（降低身高，增加閃避能力）
- **Shift**（移動時）：滑行（快速移動一段距離）

### 其他操作

- **E**：互動（預留功能）
- **ESC**：返回主選單
- **R**：重新開始關卡（在遊戲結束或完成時）
- **Enter**：確認選擇或進入下一關

## 遊戲機制

### 生命系統

- 玩家有 3 顆愛心
- 受到任何傷害都會失去 1 顆愛心
- 愛心歸零時遊戲結束

### 無敵時間

- 受到傷害後有 0.5 秒無敵時間
- 無敵期間角色會閃爍提示

### 防禦機制

- 防禦持續 1 秒
- 冷卻時間 3 秒
- 防禦期間完全免疫傷害

## 關卡介紹

### 第一關：訓練場

- **敵人**：訓練用人偶
- **特點**：敵人不會主動攻擊，適合熟悉操作
- **目標**：擊敗訓練人偶

### 第二關：工廠

- **敵人**：小型老鼠機器人（3 隻）
- **特點**：會向玩家衝撞攻擊
- **機制**：普通攻擊可中斷衝撞，蓄力攻擊可擊退並眩暈
- **目標**：擊敗所有小型機器人

### 第三關：實驗室（BOSS 戰）

- **敵人**：巨型老鼠機器人
- **特點**：高血量，強力攻擊，會使用特殊技能
- **機制**：普通攻擊傷害較低，只有蓄力攻擊才能造成有效傷害和眩暈
- **目標**：擊敗 BOSS

## 敵人行為

### 訓練用人偶

- 不主動攻擊
- 3 點血量
- 僅作為練習目標

### 小型老鼠機器人

- 2 點血量
- 會檢測玩家距離並發動衝撞
- 衝撞被中斷後有冷卻時間
- 可被蓄力攻擊擊退和眩暈

### 巨型老鼠機器人（BOSS）

- 10 點血量
- 會追蹤玩家位置
- 具有近戰和特殊攻擊
- 抗性較高，不易被眩暈
- 顯示血量條

## 技術特點

### 程式架構

- **狀態管理系統**：清晰的遊戲狀態切換
- **模組化設計**：角色、敵人、關卡分別獨立
- **物件導向**：使用類別封裝遊戲實體

### 視覺效果

- 流暢的 60 FPS 遊戲體驗
- 無敵時間閃爍效果
- 敵人狀態顏色變化
- BOSS 血量條顯示

### 碰撞檢測

- 精確的矩形碰撞檢測
- 拳頭與敵人的碰撞處理
- 地面和邊界碰撞

## 專案結構

```
game/
├── main.py              # 主遊戲文件
├── run_game.py          # 啟動腳本
├── constants.py         # 遊戲常數定義
├── game_states.py       # 遊戲狀態管理
├── menu.py              # 主選單
├── instructions.py      # 遊戲說明
├── game_level.py        # 關卡系統
├── player.py            # 玩家角色和拳頭類別
├── enemies.py           # 敵人類別定義
├── platform_system.py  # 平台碰撞系統
├── particle_system.py  # 粒子效果系統
├── font_manager.py      # 字體管理系統
├── requirements.txt     # 依賴套件
└── README.md            # 說明文檔
```

## 開發指南

本遊戲遵循 pygame 開發原則：

- 使用 4 個空格縮排
- 清晰的主遊戲迴圈結構
- 60 FPS 幀率控制
- 完整的事件處理機制
- 適當的中文註解

## 故障排除

1. **pygame 模組找不到**

   ```bash
   pip install pygame
   ```

2. **遊戲畫面不顯示**

   - 檢查是否有其他程式佔用視窗
   - 確認 pygame 版本相容性

3. **按鍵沒有反應**
   - 確保遊戲視窗處於焦點狀態
   - 檢查鍵盤輸入方法

## 未來擴展

- 更多關卡和敵人類型
- 道具和升級系統
- 音效和背景音樂
- 更精美的圖形和動畫
- 多人對戰模式

## 授權

本專案採用開源授權，歡迎學習和改進。
